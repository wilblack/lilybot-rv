<ion-view title="RV Home">
  <ion-nav-buttons side="left">
    <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>
  </ion-nav-buttons>
  <ion-content class="has-header">
    <div class="row">
      <div class="card" ng-click="toggleUnits('temp');">
        <div class="centered item item-divider">
          Temperature
        </div>
        <div class="item item-text-wrap">
          <div class="large-stat energized" ng-show="units.temp === 'c'">{{current.temp | number: 1}} &deg;C</div>
          <div class="large-stat energized" ng-show="units.temp === 'f'">{{celsius2fahrenheit(current.temp) | number: 1}} &deg;F</div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-50">
        <div class="card">
          <div class="item item-divider">
            Humidity
          </div>
          <div class="item item-text-wrap large-stat energized">
            {{current.humidity | number: 1}}% 
          </div>
        </div>
      </div>

      <div class="col-50">
        <div class="card">
          <div class="item item-divider">
            Barom
          </div>
          <div class="item item-text-wrap large-stat energized">
            {{current.pressure | number: 1}} kPa
          </div>
        </div>
      </div>
    </div>
    
    <div class="padding">
      <h4>Temperature</h4>
      <nvd3-line-chart
        data="graphs.temp"
        showXAxis="true"
        showYAxis="true"
        height="250"
        xAxisTickFormat="xAxisTickFormatFunction()"
        forcey="[0, 35]"
        tooltips="true"
        objectequality="true"
        interactive="true">
      </nvd3-line-chart>

      <h4>Humidity</h4>
      <nvd3-line-chart
        data="graphs.humidity"
        showXAxis="true"
        showYAxis="true"
        height="250"
        xAxisTickFormat="xAxisTickFormatFunction()"
        forcey="[0, 100]"
        tooltips="true"
        objectequality="true"
        interactive="true">
      </nvd3-line-chart>

      <h4>Light</h4>
      <nvd3-line-chart
        data="graphs.light"
        showXAxis="true"
        showYAxis="true"
        height="250"
        xAxisTickFormat="xAxisTickFormatFunction()"
        yDomain="[0, 100]"
        tooltips="true"
        objectequality="true"
        interactive="true">
      </nvd3-line-chart>

    </div>

    <div class="row" class="padding"> 
      <small>Last updated: {{current.timestamp | date:'short'}}</small>
      <span ng-click='refreshSensorValues()'><i class="icon ion-refresh"></i></span>
    </div>

    <div class="padding">
      <a class="button button-positive button-block" href="#/app/mileage/form">Enter Mileage</a> 
    </div>

  </ion-content>
</ion-view>
